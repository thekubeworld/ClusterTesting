[{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"app":"antrea","component":"antrea-agent"}},"spec":{"containers":[{"args":["-c","sleep 2; exec antrea-agent --config /etc/antrea/antrea-agent.conf"],"command":["/bin/sh"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/sh","-c","container_liveness_probe agent"]},"failureThreshold":5,"initialDelaySeconds":5,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5},"name":"antrea-agent","ports":[{"containerPort":10350,"hostPort":10350,"name":"api","protocol":"TCP"}],"readinessProbe":{"failureThreshold":5,"httpGet":{"host":"localhost","path":"/readyz","port":"api","scheme":"HTTPS"},"initialDelaySeconds":5,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5},"resources":{"requests":{"cpu":"200m"}},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/antrea/antrea-agent.conf","name":"antrea-config","readOnly":true,"subPath":"antrea-agent.conf"},{"mountPath":"/var/run/antrea","name":"host-var-run-antrea"},{"mountPath":"/var/run/openvswitch","name":"host-var-run-antrea","subPath":"openvswitch"},{"mountPath":"/var/lib/cni","name":"host-var-run-antrea","subPath":"cni"},{"mountPath":"/var/log/antrea","name":"host-var-log-antrea"},{"mountPath":"/host/proc","name":"host-proc","readOnly":true},{"mountPath":"/host/var/run/netns","mountPropagation":"HostToContainer","name":"host-var-run-netns","readOnly":true},{"mountPath":"/run/xtables.lock","name":"xtables-lock"}]},{"args":["--log_file_max_size=100","--log_file_max_num=4"],"command":["start_ovs_netdev"],"image":"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1","imagePullPolicy":"IfNotPresent","livenessProbe":{"exec":{"command":["/bin/sh","-c","timeout 10 container_liveness_probe ovs"]},"failureThreshold":5,"initialDelaySeconds":5,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":10},"name":"antrea-ovs","resources":{"requests":{"cpu":"200m"}},"securityContext":{"capabilities":{"add":["SYS_NICE","NET_ADMIN","SYS_ADMIN","IPC_LOCK"]}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/dev/net/tun","name":"dev-tun"},{"mountPath":"/var/run/openvswitch","name":"host-var-run-antrea","subPath":"openvswitch"},{"mountPath":"/var/log/openvswitch","name":"host-var-log-antrea","subPath":"openvswitch"}]}],"dnsPolicy":"ClusterFirstWithHostNet","hostNetwork":true,"initContainers":[{"command":["install_cni_kind"],"image":"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1","imagePullPolicy":"IfNotPresent","name":"install-cni","resources":{"requests":{"cpu":"100m"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/etc/antrea/antrea-cni.conflist","name":"antrea-config","readOnly":true,"subPath":"antrea-cni.conflist"},{"mountPath":"/host/etc/cni/net.d","name":"host-cni-conf"},{"mountPath":"/host/opt/cni/bin","name":"host-cni-bin"},{"mountPath":"/lib/modules","name":"host-lib-modules","readOnly":true},{"mountPath":"/var/run/antrea","name":"host-var-run-antrea"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"antrea-agent","serviceAccountName":"antrea-agent","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"effect":"NoSchedule","operator":"Exists"},{"effect":"NoExecute","operator":"Exists"}],"volumes":[{"hostPath":{"path":"/dev/net/tun","type":"CharDevice"},"name":"dev-tun"},{"configMap":{"defaultMode":420,"name":"antrea-config-6289f29b6b"},"name":"antrea-config"},{"hostPath":{"path":"/etc/cni/net.d","type":""},"name":"host-cni-conf"},{"hostPath":{"path":"/opt/cni/bin","type":""},"name":"host-cni-bin"},{"hostPath":{"path":"/proc","type":""},"name":"host-proc"},{"hostPath":{"path":"/var/run/netns","type":""},"name":"host-var-run-netns"},{"hostPath":{"path":"/var/run/antrea","type":"DirectoryOrCreate"},"name":"host-var-run-antrea"},{"hostPath":{"path":"/var/log/antrea","type":"DirectoryOrCreate"},"name":"host-var-log-antrea"},{"hostPath":{"path":"/lib/modules","type":""},"name":"host-lib-modules"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1","kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"DaemonSet\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"antrea\",\"component\":\"antrea-agent\"},\"name\":\"antrea-agent\",\"namespace\":\"kube-system\"},\"spec\":{\"selector\":{\"matchLabels\":{\"app\":\"antrea\",\"component\":\"antrea-agent\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"antrea\",\"component\":\"antrea-agent\"}},\"spec\":{\"containers\":[{\"args\":[\"-c\",\"sleep 2; exec antrea-agent --config /etc/antrea/antrea-agent.conf\"],\"command\":[\"/bin/sh\"],\"env\":[{\"name\":\"POD_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"metadata.name\"}}},{\"name\":\"POD_NAMESPACE\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"metadata.namespace\"}}},{\"name\":\"NODE_NAME\",\"valueFrom\":{\"fieldRef\":{\"fieldPath\":\"spec.nodeName\"}}}],\"image\":\"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"container_liveness_probe agent\"]},\"failureThreshold\":5,\"initialDelaySeconds\":5,\"periodSeconds\":10,\"timeoutSeconds\":5},\"name\":\"antrea-agent\",\"ports\":[{\"containerPort\":10350,\"name\":\"api\",\"protocol\":\"TCP\"}],\"readinessProbe\":{\"failureThreshold\":5,\"httpGet\":{\"host\":\"localhost\",\"path\":\"/readyz\",\"port\":\"api\",\"scheme\":\"HTTPS\"},\"initialDelaySeconds\":5,\"periodSeconds\":10,\"timeoutSeconds\":5},\"resources\":{\"requests\":{\"cpu\":\"200m\"}},\"securityContext\":{\"privileged\":true},\"volumeMounts\":[{\"mountPath\":\"/etc/antrea/antrea-agent.conf\",\"name\":\"antrea-config\",\"readOnly\":true,\"subPath\":\"antrea-agent.conf\"},{\"mountPath\":\"/var/run/antrea\",\"name\":\"host-var-run-antrea\"},{\"mountPath\":\"/var/run/openvswitch\",\"name\":\"host-var-run-antrea\",\"subPath\":\"openvswitch\"},{\"mountPath\":\"/var/lib/cni\",\"name\":\"host-var-run-antrea\",\"subPath\":\"cni\"},{\"mountPath\":\"/var/log/antrea\",\"name\":\"host-var-log-antrea\"},{\"mountPath\":\"/host/proc\",\"name\":\"host-proc\",\"readOnly\":true},{\"mountPath\":\"/host/var/run/netns\",\"mountPropagation\":\"HostToContainer\",\"name\":\"host-var-run-netns\",\"readOnly\":true},{\"mountPath\":\"/run/xtables.lock\",\"name\":\"xtables-lock\"}]},{\"args\":[\"--log_file_max_size=100\",\"--log_file_max_num=4\"],\"command\":[\"start_ovs_netdev\"],\"image\":\"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1\",\"livenessProbe\":{\"exec\":{\"command\":[\"/bin/sh\",\"-c\",\"timeout 10 container_liveness_probe ovs\"]},\"failureThreshold\":5,\"initialDelaySeconds\":5,\"periodSeconds\":10,\"timeoutSeconds\":10},\"name\":\"antrea-ovs\",\"resources\":{\"requests\":{\"cpu\":\"200m\"}},\"securityContext\":{\"capabilities\":{\"add\":[\"SYS_NICE\",\"NET_ADMIN\",\"SYS_ADMIN\",\"IPC_LOCK\"]}},\"volumeMounts\":[{\"mountPath\":\"/dev/net/tun\",\"name\":\"dev-tun\"},{\"mountPath\":\"/var/run/openvswitch\",\"name\":\"host-var-run-antrea\",\"subPath\":\"openvswitch\"},{\"mountPath\":\"/var/log/openvswitch\",\"name\":\"host-var-log-antrea\",\"subPath\":\"openvswitch\"}]}],\"dnsPolicy\":\"ClusterFirstWithHostNet\",\"hostNetwork\":true,\"initContainers\":[{\"command\":[\"install_cni_kind\"],\"image\":\"projects.registry.vmware.com/antrea/antrea-ubuntu:v1.0.1\",\"name\":\"install-cni\",\"resources\":{\"requests\":{\"cpu\":\"100m\"}},\"volumeMounts\":[{\"mountPath\":\"/etc/antrea/antrea-cni.conflist\",\"name\":\"antrea-config\",\"readOnly\":true,\"subPath\":\"antrea-cni.conflist\"},{\"mountPath\":\"/host/etc/cni/net.d\",\"name\":\"host-cni-conf\"},{\"mountPath\":\"/host/opt/cni/bin\",\"name\":\"host-cni-bin\"},{\"mountPath\":\"/lib/modules\",\"name\":\"host-lib-modules\",\"readOnly\":true},{\"mountPath\":\"/var/run/antrea\",\"name\":\"host-var-run-antrea\"}]}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"priorityClassName\":\"system-node-critical\",\"serviceAccountName\":\"antrea-agent\",\"tolerations\":[{\"key\":\"CriticalAddonsOnly\",\"operator\":\"Exists\"},{\"effect\":\"NoSchedule\",\"operator\":\"Exists\"},{\"effect\":\"NoExecute\",\"operator\":\"Exists\"}],\"volumes\":[{\"hostPath\":{\"path\":\"/dev/net/tun\",\"type\":\"CharDevice\"},\"name\":\"dev-tun\"},{\"configMap\":{\"name\":\"antrea-config-6289f29b6b\"},\"name\":\"antrea-config\"},{\"hostPath\":{\"path\":\"/etc/cni/net.d\"},\"name\":\"host-cni-conf\"},{\"hostPath\":{\"path\":\"/opt/cni/bin\"},\"name\":\"host-cni-bin\"},{\"hostPath\":{\"path\":\"/proc\"},\"name\":\"host-proc\"},{\"hostPath\":{\"path\":\"/var/run/netns\"},\"name\":\"host-var-run-netns\"},{\"hostPath\":{\"path\":\"/var/run/antrea\",\"type\":\"DirectoryOrCreate\"},\"name\":\"host-var-run-antrea\"},{\"hostPath\":{\"path\":\"/var/log/antrea\",\"type\":\"DirectoryOrCreate\"},\"name\":\"host-var-log-antrea\"},{\"hostPath\":{\"path\":\"/lib/modules\"},\"name\":\"host-lib-modules\"},{\"hostPath\":{\"path\":\"/run/xtables.lock\",\"type\":\"FileOrCreate\"},\"name\":\"xtables-lock\"}]}},\"updateStrategy\":{\"type\":\"RollingUpdate\"}}}\n"},"creationTimestamp":"2021-05-11T05:14:26Z","labels":{"app":"antrea","component":"antrea-agent","controller-revision-hash":"665947c7c4"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{},"f:kubectl.kubernetes.io/last-applied-configuration":{}},"f:labels":{".":{},"f:app":{},"f:component":{},"f:controller-revision-hash":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"c4eda262-b33f-4ed5-be59-b46650ca5ecb\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2021-05-11T05:14:26Z"}],"name":"antrea-agent-665947c7c4","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"antrea-agent","uid":"c4eda262-b33f-4ed5-be59-b46650ca5ecb"}],"resourceVersion":"743","uid":"627fc484-cd8f-41d5-95e4-1b8a1929c9e8"},"revision":1},{"apiVersion":"apps/v1","data":{"spec":{"template":{"$patch":"replace","metadata":{"creationTimestamp":null,"labels":{"k8s-app":"kube-proxy"}},"spec":{"containers":[{"command":["/usr/local/bin/kube-proxy","--config=/var/lib/kube-proxy/config.conf","--hostname-override=$(NODE_NAME)"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"image":"k8s.gcr.io/kube-proxy:v1.20.2","imagePullPolicy":"IfNotPresent","name":"kube-proxy","resources":{},"securityContext":{"privileged":true},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/var/lib/kube-proxy","name":"kube-proxy"},{"mountPath":"/run/xtables.lock","name":"xtables-lock"},{"mountPath":"/lib/modules","name":"lib-modules","readOnly":true}]}],"dnsPolicy":"ClusterFirst","hostNetwork":true,"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-node-critical","restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"serviceAccount":"kube-proxy","serviceAccountName":"kube-proxy","terminationGracePeriodSeconds":30,"tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists"}],"volumes":[{"configMap":{"defaultMode":420,"name":"kube-proxy"},"name":"kube-proxy"},{"hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"},"name":"xtables-lock"},{"hostPath":{"path":"/lib/modules","type":""},"name":"lib-modules"}]}}}},"kind":"ControllerRevision","metadata":{"annotations":{"deprecated.daemonset.template.generation":"1"},"creationTimestamp":"2021-05-11T05:13:48Z","labels":{"controller-revision-hash":"b89db7f56","k8s-app":"kube-proxy"},"managedFields":[{"apiVersion":"apps/v1","fieldsType":"FieldsV1","fieldsV1":{"f:data":{},"f:metadata":{"f:annotations":{".":{},"f:deprecated.daemonset.template.generation":{}},"f:labels":{".":{},"f:controller-revision-hash":{},"f:k8s-app":{}},"f:ownerReferences":{".":{},"k:{\"uid\":\"0a883388-8b81-4c85-b968-88cb8676a219\"}":{".":{},"f:apiVersion":{},"f:blockOwnerDeletion":{},"f:controller":{},"f:kind":{},"f:name":{},"f:uid":{}}}},"f:revision":{}},"manager":"kube-controller-manager","operation":"Update","time":"2021-05-11T05:13:48Z"}],"name":"kube-proxy-b89db7f56","namespace":"kube-system","ownerReferences":[{"apiVersion":"apps/v1","blockOwnerDeletion":true,"controller":true,"kind":"DaemonSet","name":"kube-proxy","uid":"0a883388-8b81-4c85-b968-88cb8676a219"}],"resourceVersion":"426","uid":"85761008-8499-4fe9-a9e2-d493a1458e63"},"revision":1}]